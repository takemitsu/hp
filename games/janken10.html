<!DOCTYPE html>
<html lang="ja" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ã˜ã‚ƒã‚“ã‘ã‚“é€£å‹ãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'JetBrains Mono', monospace;
    }
    .hand-btn {
      font-size: 4rem;
      min-height: 120px;
      min-width: 120px;
      border-radius: 50%;
      margin: 10px;
      transition: transform 0.1s;
      touch-action: manipulation;
    }
    
    button {
      touch-action: manipulation;
    }
    .hand-btn:active {
      transform: scale(0.95);
    }
    .vs-display {
      font-size: 3rem;
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .win-streak {
      font-size: 2rem;
      font-weight: bold;
      color: var(--bs-success);
    }
    .message-area {
      min-height: 80px;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .result-display {
      font-size: 1.5rem;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .game-over {
      color: var(--bs-danger);
      font-weight: bold;
    }
    .game-clear {
      color: var(--bs-warning);
      font-weight: bold;
    }
    @media (max-width: 576px) {
      .hand-btn {
        font-size: 3rem;
        min-height: 100px;
        min-width: 100px;
        margin: 5px;
      }
      .vs-display {
        font-size: 2.5rem;
        min-height: 100px;
      }
      .win-streak {
        font-size: 1.5rem;
      }
      .message-area {
        font-size: 1rem;
        min-height: 60px;
      }
    }
  </style>
</head>
<body>
<nav class="navbar bg-body-tertiary" id="header" aria-label="header">
  <div class="container-fluid justify-content-start">
    <a class="navbar-brand" href="/">takemitsu.net</a>
    <div class="nav-text" id="fonts">ã˜ã‚ƒã‚“ã‘ã‚“é€£å‹ãƒãƒ£ãƒ¬ãƒ³ã‚¸</div>

    <ul class="navbar-nav flex-row ms-auto mb-2 mb-lg-0">
      <li class="nav-item mx-1"><a class="nav-link" href="#" onclick="changeTheme('dark')">dark</a></li>
      <li class="nav-item mx-1"><a class="nav-link" href="#" onclick="changeTheme('light')">light</a></li>
    </ul>
  </div>
</nav>

<div class="container mt-3">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      
      <!-- ã‚²ãƒ¼ãƒ èª¬æ˜ -->
      <div class="card mb-4" id="intro-panel">
        <div class="card-body text-center">
          <h3 class="mb-3">ã˜ã‚ƒã‚“ã‘ã‚“é€£å‹ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h3>
          <p class="mb-3">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«é€£ç¶šã§å‹ã¦ã‚‹ã‹ãªï¼Ÿ<br>1å›ã§ã‚‚è² ã‘ãŸã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã§ã™ï¼</p>
          
          <div class="mb-4">
            <h5 class="mb-3">é›£æ˜“åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„</h5>
            <div class="d-grid gap-2 d-md-block">
              <button class="btn btn-success btn-lg mx-1" onclick="startGame(3)">
                ã‚¤ãƒ¼ã‚¸ãƒ¼<br><small>3é€£å‹ã§ã‚¯ãƒªã‚¢</small>
              </button>
              <button class="btn btn-warning btn-lg mx-1" onclick="startGame(5)">
                ãƒãƒ¼ãƒãƒ«<br><small>5é€£å‹ã§ã‚¯ãƒªã‚¢</small>
              </button>
              <button class="btn btn-danger btn-lg mx-1" onclick="startGame(10)">
                ãƒãƒ¼ãƒ‰<br><small>10é€£å‹ã§ã‚¯ãƒªã‚¢</small>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
      <div class="card" id="game-panel" style="display: none;">
        <div class="card-body">
          
          <!-- é€£å‹æ•°è¡¨ç¤º -->
          <div class="text-center mb-3">
            <div class="win-streak">é€£å‹æ•°: <span id="win-count">0</span> / <span id="target-wins">10</span></div>
          </div>

          <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ -->
          <div class="message-area mb-3" id="message-area">
            ãŒã‚“ã°ã£ã¦ï¼
          </div>

          <!-- å¯¾æˆ¦è¡¨ç¤º -->
          <div class="row justify-content-center align-items-center mb-3">
            <div class="col-4 text-center">
              <div class="text-muted">ã‚ãªãŸ</div>
              <div class="vs-display" id="player-hand">â“</div>
            </div>
            <div class="col-4 text-center">
              <div class="h4 mb-0">VS</div>
            </div>
            <div class="col-4 text-center">
              <div class="text-muted">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼</div>
              <div class="vs-display" id="computer-hand">â“</div>
            </div>
          </div>

          <!-- çµæœè¡¨ç¤º -->
          <div class="result-display mb-3" id="result-display">
            æ‰‹ã‚’é¸ã‚“ã§ãã ã•ã„
          </div>

          <!-- ã˜ã‚ƒã‚“ã‘ã‚“ãƒœã‚¿ãƒ³ -->
          <div class="text-center mb-3">
            <button class="btn btn-outline-primary hand-btn" onclick="playJanken('rock')" id="btn-rock">âœŠ</button>
            <button class="btn btn-outline-primary hand-btn" onclick="playJanken('paper')" id="btn-paper">ğŸ–ï¸</button>
            <button class="btn btn-outline-primary hand-btn" onclick="playJanken('scissors')" id="btn-scissors">âœŒï¸</button>
          </div>

          <div class="text-center">
            <small class="text-muted">ã‚°ãƒ¼ / ãƒ‘ãƒ¼ / ãƒãƒ§ã‚­</small>
          </div>

          <!-- ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
          <div class="text-center mt-3">
            <button class="btn btn-secondary" onclick="resetGame()">ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
        </div>
      </div>

      <!-- çµæœç”»é¢ -->
      <div class="card" id="result-panel" style="display: none;">
        <div class="card-body text-center">
          <div id="final-message" class="mb-4"></div>
          <div class="d-grid gap-2">
            <button class="btn btn-primary" onclick="startGame(gameState ? gameState.targetWins : 10)">åŒã˜é›£æ˜“åº¦ã§ã‚‚ã†ä¸€åº¦ï¼</button>
            <button class="btn btn-secondary" onclick="showIntro()">é›£æ˜“åº¦é¸æŠã«æˆ»ã‚‹</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="../setTheme.mini.js"></script>
<script>
// ã‚²ãƒ¼ãƒ çŠ¶æ…‹
let gameState = {
  isPlaying: false,
  winCount: 0,
  targetWins: 10,
  playerChoice: null,
  computerChoice: null
};

// ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹ã®è¡¨ç¤º
const handDisplay = {
  rock: 'âœŠ',
  paper: 'ğŸ–ï¸',
  scissors: 'âœŒï¸'
};

// ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹ã®åå‰
const handName = {
  rock: 'ã‚°ãƒ¼',
  paper: 'ãƒ‘ãƒ¼',
  scissors: 'ãƒãƒ§ã‚­'
};

// é€£å‹ä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
const winMessages = [
  ['ãŒã‚“ã°ã£ã¦ï¼', 'ã•ã‚ã€å§‹ã‚ã‚ˆã†ï¼', 'ã¾ãšã¯1å‹ã‹ã‚‰ï¼'], // 0é€£å‹
  ['ã„ã„èª¿å­ï¼', 'ã‚„ã‚‹ã˜ã‚ƒã‚“ï¼', 'ã¾ãšã¯1å‹ï¼'], // 1é€£å‹
  ['èª¿å­ã«ä¹—ã‚‹ãª...', '2é€£å‹ï¼', 'ã¾ã ã¾ã åºç›¤ã ã‚ˆ'], // 2é€£å‹
  ['ã¾ã ã¾ã åºç›¤ï¼', '3é€£å‹é”æˆï¼', 'ã“ã®èª¿å­ã§ï¼'], // 3é€£å‹
  ['ã ã‚“ã ã‚“ç·Šå¼µã—ã¦ããŸ...', '4é€£å‹ï¼ã™ã”ã„ã­', 'ã¡ã‚‡ã£ã¨ãƒ‰ã‚­ãƒ‰ã‚­...'], // 4é€£å‹
  ['æ‰‹ã«æ±—ãŒ...', '5é€£å‹ï¼åŠåˆ†ã ï¼', 'ã¾ã˜ã§ã™ã”ã„ãª...'], // 5é€£å‹
  ['ã¡ã‚‡ã£ã¨æ€–ããªã£ã¦ããŸ...', '6é€£å‹ï¼ã™ã’ã‡...', 'ç·Šå¼µã—ã¦ããŸã...'], // 6é€£å‹
  ['ã‚ã¨å°‘ã—ï¼é ‘å¼µã£ã¦ï¼', '7é€£å‹ï¼ã™ã”ã™ãã‚‹ï¼', 'ãƒ‰ã‚­ãƒ‰ã‚­ãŒæ­¢ã¾ã‚‰ãªã„ï¼'], // 7é€£å‹
  ['å¿ƒè‡“ãŒãƒã‚¯ãƒã‚¯ï¼', '8é€£å‹ï¼ã‚„ã°ã™ãã‚‹ï¼', 'æ‰‹ãŒéœ‡ãˆã¦ã‚‹...'], // 8é€£å‹
  ['ã‚ã¨1å‹ï¼éœ‡ãˆãŒæ­¢ã¾ã‚‰ãªã„...', '9é€£å‹ï¼ï¼ï¼ã‚ã¨1ã¤ï¼', 'ä¼èª¬ã¾ã§ã‚ã¨1å‹ï¼'], // 9é€£å‹
];

// æ•—åŒ—æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
const loseMessages = [
  ['ã¾ã ã¾ã ï¼ã‚‚ã†ä¸€å›ï¼', 'ãƒ‰ãƒ³ãƒã‚¤ï¼', 'æ¬¡ã¯é ‘å¼µã‚ã†ï¼'], // 0é€£å‹ã§æ•—åŒ—
  ['ã¾ã ã¾ã ï¼ã‚‚ã†ä¸€å›ï¼', '1æ•—ã§ãƒªã‚»ãƒƒãƒˆ...', 'ã¾ã åºç›¤ã ã‹ã‚‰ï¼'], // 1é€£å‹ã§æ•—åŒ—
  ['ã¾ã ã¾ã ï¼ã‚‚ã†ä¸€å›ï¼', '2é€£å‹ã§ã‚¹ãƒˆãƒƒãƒ—...', 'ã‚‚ã†å°‘ã—ã ã£ãŸã®ã«'], // 2é€£å‹ã§æ•—åŒ—
  ['ã¡ã‚‡ã£ã¨æƒœã—ã„ï¼3é€£å‹ã§ã—ãŸ', '3é€£å‹ã§çµ‚äº†...', 'ãªã‹ãªã‹ã‚„ã‚‹ã˜ã‚ƒã‚“'], // 3é€£å‹ã§æ•—åŒ—
  ['æƒœã—ã„ï¼4é€£å‹ã§ã—ãŸã€‚ã‚ã¨å°‘ã—ã ã£ãŸã®ã«...', '4é€£å‹ã§ã‚¹ãƒˆãƒƒãƒ—ï¼', 'æ‚”ã—ã„ãªã...'], // 4é€£å‹ã§æ•—åŒ—
  ['æ‚”ã—ã„ï¼5é€£å‹ã§çµ‚äº†...ï¼', '5é€£å‹ã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼', 'ãªã‹ãªã‹ã„ã„ç·šã„ã£ã¦ãŸã®ã«...'], // 5é€£å‹ã§æ•—åŒ—
  ['ã†ã‚ã‚ã‚ã‚ï¼6é€£å‹ã§çµ‚äº†...ï¼æ‚”ã—ã„ï¼', '6é€£å‹ã§ã‚¹ãƒˆãƒƒãƒ—...ï¼', 'ã“ã“ã¾ã§æ¥ãŸã®ã«...ï¼'], // 6é€£å‹ã§æ•—åŒ—
  ['ã‚ã‚ã‚ã‚ã‚ï¼7é€£å‹ã§çµ‚äº†...ï¼ã‚‚ã†å°‘ã—ã ã£ãŸã®ã«ï¼', '7é€£å‹ã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼...ï¼', 'ã“ã‚“ãªã¨ã“ã‚ã§...ï¼'], // 7é€£å‹ã§æ•—åŒ—
  ['ã†ãã§ã—ã‚‡ï¼ï¼Ÿ8é€£å‹ã§çµ‚äº†...ï¼å¿ƒãŒæŠ˜ã‚Œã‚‹...', '8é€£å‹ã§ä¸‡äº‹ä¼‘ã™...', 'ã‚ã¨2ã¤ã ã£ãŸã®ã«...ï¼'], // 8é€£å‹ã§æ•—åŒ—
  ['9é€£å‹ã§ã‚ã¨1å‹ã ã£ãŸã®ã«...ï¼æ‚”ã—ã™ãã‚‹...ï¼', 'ã‚ã¨1å‹ã§ä¼èª¬ã ã£ãŸã®ã«...ï¼', '9é€£å‹ã§çµ‚äº†...ç„¡å¿µ...'], // 9é€£å‹ã§æ•—åŒ—
];

// ãƒ©ãƒ³ãƒ€ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
function getRandomMessage(messages, winCount) {
  const messageArray = messages[winCount];
  return messageArray[Math.floor(Math.random() * messageArray.length)];
}

// ã‚²ãƒ¼ãƒ é–‹å§‹
function startGame(targetWins = 10) {
  // å…¥åŠ›å€¤æ¤œè¨¼
  if (typeof targetWins !== 'number' || targetWins < 1 || targetWins > 50) {
    console.warn('Invalid targetWins value:', targetWins);
    targetWins = 10; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨
  }
  
  gameState = {
    isPlaying: true,
    winCount: 0,
    targetWins: targetWins,
    playerChoice: null,
    computerChoice: null
  };
  
  // UIåˆ‡ã‚Šæ›¿ãˆ
  document.getElementById('intro-panel').style.display = 'none';
  document.getElementById('game-panel').style.display = 'block';
  document.getElementById('result-panel').style.display = 'none';
  
  // åˆæœŸè¡¨ç¤º
  updateDisplay();
}

// è¡¨ç¤ºæ›´æ–°
function updateDisplay() {
  // DOMè¦ç´ ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯
  const elements = {
    winCount: document.getElementById('win-count'),
    targetWins: document.getElementById('target-wins'),
    messageArea: document.getElementById('message-area'),
    playerHand: document.getElementById('player-hand'),
    computerHand: document.getElementById('computer-hand'),
    resultDisplay: document.getElementById('result-display')
  };
  
  // å¿…è¦ãªè¦ç´ ãŒå­˜åœ¨ã—ãªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  for (const [key, element] of Object.entries(elements)) {
    if (!element) {
      console.error(`Element not found: ${key}`);
      return;
    }
  }
  
  elements.winCount.textContent = gameState.winCount || 0;
  elements.targetWins.textContent = gameState.targetWins || 10;
  
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é€£å‹æ•°ã«å¿œã˜ã¦ï¼ˆæœ€å¤§9ã¾ã§ï¼‰
  const messageIndex = Math.min(gameState.winCount || 0, winMessages.length - 1);
  elements.messageArea.textContent = getRandomMessage(winMessages, messageIndex);
  
  // æ‰‹ã®è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
  elements.playerHand.textContent = 'â“';
  elements.computerHand.textContent = 'â“';
  elements.resultDisplay.textContent = 'æ‰‹ã‚’é¸ã‚“ã§ãã ã•ã„';
  
  // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
  enableButtons(true);
}

// ã˜ã‚ƒã‚“ã‘ã‚“å®Ÿè¡Œ
function playJanken(playerChoice) {
  if (!gameState.isPlaying) return;
  
  gameState.playerChoice = playerChoice;
  gameState.computerChoice = getComputerChoice();
  
  // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
  enableButtons(false);
  
  // æ‰‹ã‚’è¡¨ç¤º
  document.getElementById('player-hand').textContent = handDisplay[playerChoice];
  document.getElementById('computer-hand').textContent = handDisplay[gameState.computerChoice];
  
  // çµæœåˆ¤å®š
  const result = judgeResult(playerChoice, gameState.computerChoice);
  
  // çµæœè¡¨ç¤º
  setTimeout(() => {
    showResult(result);
  }, 1000);
}

// ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®æ‰‹ã‚’é¸æŠ
function getComputerChoice() {
  const choices = ['rock', 'paper', 'scissors'];
  return choices[Math.floor(Math.random() * choices.length)];
}

// å‹æ•—åˆ¤å®š
function judgeResult(player, computer) {
  if (player === computer) {
    return 'draw';
  }
  
  const winConditions = {
    rock: 'scissors',
    paper: 'rock',
    scissors: 'paper'
  };
  
  return winConditions[player] === computer ? 'win' : 'lose';
}

// çµæœè¡¨ç¤º
function showResult(result) {
  const resultDisplay = document.getElementById('result-display');
  const playerName = handName[gameState.playerChoice];
  const computerName = handName[gameState.computerChoice];
  
  if (result === 'win') {
    gameState.winCount++;
    resultDisplay.innerHTML = `<span class="text-success">å‹ã¡ï¼</span><br><small>${playerName} vs ${computerName}</small>`;
    
    // ç›®æ¨™é€£å‹æ•°åˆ°é”ãƒã‚§ãƒƒã‚¯
    if (gameState.winCount >= gameState.targetWins) {
      setTimeout(() => {
        gameWin();
      }, 1500);
    } else {
      // æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã¸
      setTimeout(() => {
        updateDisplay();
      }, 2000);
    }
  } else if (result === 'lose') {
    resultDisplay.innerHTML = `<span class="text-danger">è² ã‘...</span><br><small>${playerName} vs ${computerName}</small>`;
    setTimeout(() => {
      gameOver();
    }, 1500);
  } else {
    resultDisplay.innerHTML = `<span class="text-warning">ã‚ã„ã“</span><br><small>${playerName} vs ${computerName}</small>`;
    // ã‚ã„ã“ã®å ´åˆã¯ã‚„ã‚Šç›´ã—
    setTimeout(() => {
      updateDisplay();
    }, 2000);
  }
}

// ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
function gameOver() {
  gameState.isPlaying = false;
  
  const winCount = gameState.winCount || 0;
  const finalMessage = `
    <h3 class="game-over">ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</h3>
    <p class="mb-3">${getRandomMessage(loseMessages, winCount)}</p>
    <div class="h5">æœ€çµ‚è¨˜éŒ²: ${winCount}é€£å‹</div>
  `;
  
  const finalMessageElement = document.getElementById('final-message');
  if (finalMessageElement) {
    finalMessageElement.innerHTML = finalMessage;
  } else {
    console.error('final-message element not found');
  }
  
  const gamePanel = document.getElementById('game-panel');
  const resultPanel = document.getElementById('result-panel');
  
  if (gamePanel && resultPanel) {
    gamePanel.style.display = 'none';
    resultPanel.style.display = 'block';
  } else {
    console.error('Game panels not found');
  }
}

// ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢
function gameWin() {
  gameState.isPlaying = false;
  
  const targetWins = gameState.targetWins || 10;
  const difficultyName = {
    3: 'ã‚¤ãƒ¼ã‚¸ãƒ¼',
    5: 'ãƒãƒ¼ãƒãƒ«', 
    10: 'ãƒãƒ¼ãƒ‰'
  }[targetWins] || `${targetWins}é€£å‹`;
  
  const finalMessage = `
    <h3 class="game-clear">ğŸ‰ ${targetWins}é€£å‹é”æˆï¼ ğŸ‰</h3>
    <p class="mb-3">ãŠã‚ã§ã¨ã†ï¼${difficultyName}ãƒ¢ãƒ¼ãƒ‰ã‚¯ãƒªã‚¢ï¼<br>${targetWins === 10 ? 'ä¼èª¬ã‚’é”æˆã—ã¾ã—ãŸï¼' : 'ã™ã”ã„ã§ã™ï¼'}</p>
    <div class="h5 text-success">å®Œå…¨å‹åˆ©: ${targetWins}é€£å‹</div>
  `;
  
  const finalMessageElement = document.getElementById('final-message');
  if (finalMessageElement) {
    finalMessageElement.innerHTML = finalMessage;
  } else {
    console.error('final-message element not found');
  }
  
  const gamePanel = document.getElementById('game-panel');
  const resultPanel = document.getElementById('result-panel');
  
  if (gamePanel && resultPanel) {
    gamePanel.style.display = 'none';
    resultPanel.style.display = 'block';
  } else {
    console.error('Game panels not found');
  }
}

// ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹åˆ‡ã‚Šæ›¿ãˆ
function enableButtons(enabled) {
  const buttons = ['btn-rock', 'btn-paper', 'btn-scissors'];
  buttons.forEach(buttonId => {
    const button = document.getElementById(buttonId);
    if (button) {
      button.disabled = !enabled;
    } else {
      console.warn('Button not found:', buttonId);
    }
  });
}

// ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
function resetGame() {
  if (!gameState.isPlaying) {
    startGame();
    return;
  }
  
  if (confirm('ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
    startGame();
  }
}

// ã‚¤ãƒ³ãƒˆãƒ­ç”»é¢ã«æˆ»ã‚‹
function showIntro() {
  if (gameState) {
    gameState.isPlaying = false;
  }
  
  const panels = ['intro-panel', 'game-panel', 'result-panel'];
  const visibility = ['block', 'none', 'none'];
  
  panels.forEach((panelId, index) => {
    const panel = document.getElementById(panelId);
    if (panel) {
      panel.style.display = visibility[index];
    } else {
      console.error(`Panel not found: ${panelId}`);
    }
  });
}

// ãƒœã‚¿ãƒ³ã®activeçŠ¶æ…‹è§£é™¤ï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰
document.addEventListener('DOMContentLoaded', function() {
  const handButtons = document.querySelectorAll('.hand-btn');
  handButtons.forEach(button => {
    button.addEventListener('click', function() {
      this.blur();
      setTimeout(() => {
        this.classList.remove('active');
        this.style.transform = '';
      }, 100);
    });
  });
});
</script>
</body>
</html>